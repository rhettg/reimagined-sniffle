#!/bin/bash
# This script is intended to install dependencies.

set -e

echo "Starting bootstrap process..."

# Ensure the correct Ruby version is used
if ! command -v rbenv &> /dev/null; then
    echo "rbenv not found. Please install rbenv and try again."
    exit 1
fi

rbenv install 3.2.0 -s
rbenv local 3.2.0

echo "Using Ruby version: $(ruby -v)"

# Install bundler if not already installed
gem install bundler -v 2.4.12

# Install Ruby dependencies
echo "Installing Ruby dependencies..."
bundle install

# Install any system-level dependencies (example: for PostgreSQL)
echo "Installing system dependencies..."
sudo apt-get update
sudo apt-get install -y postgresql postgresql-contrib libpq-dev

echo "Bootstrap process completed successfully."
